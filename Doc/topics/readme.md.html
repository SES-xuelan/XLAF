<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>doc</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>doc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>



<h2>Topics</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><strong>readme</strong></li>
</ul>
<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/appyeast.html">appyeast</a></li>
  <li><a href="../modules/class_Keyboard.html">class_Keyboard</a></li>
  <li><a href="../modules/dmc_objects.html">dmc_objects</a></li>
  <li><a href="../modules/dmc_utils.html">dmc_utils</a></li>
  <li><a href="../modules/enc.html">enc</a></li>
  <li><a href="../modules/fps.html">fps</a></li>
  <li><a href="../modules/lib_text_candy.html">lib_text_candy</a></li>
  <li><a href="../modules/log.html">log</a></li>
  <li><a href="../modules/mgr_audio.html">mgr_audio</a></li>
  <li><a href="../modules/mgr_gamenetworks.html">mgr_gamenetworks</a></li>
  <li><a href="../modules/mgr_lang.html">mgr_lang</a></li>
  <li><a href="../modules/mgr_level.html">mgr_level</a></li>
  <li><a href="../modules/mgr_levelhelper.html">mgr_levelhelper</a></li>
  <li><a href="../modules/mgr_popup.html">mgr_popup</a></li>
  <li><a href="../modules/mgr_res.html">mgr_res</a></li>
  <li><a href="../modules/mgr_tui.html">mgr_tui</a></li>
  <li><a href="../modules/mgr_tutorial.html">mgr_tutorial</a></li>
  <li><a href="../modules/mod_random.html">mod_random</a></li>
  <li><a href="../modules/mod_utils.html">mod_utils</a></li>
  <li><a href="../modules/syscfg.html">syscfg</a></li>
  <li><a href="../modules/ui_label.html">ui_label</a></li>
  <li><a href="../modules/ui_slide.html">ui_slide</a></li>
  <li><a href="../modules/ui_text.html">ui_text</a></li>
  <li><a href="../modules/utf8.html">utf8</a></li>
</ul>

</div>

<div id="content">

    <style type="text/css" >
pre {
    border: 0px solid #888;
    font-family: Consolas , "Courier New" , Courier , monospace;
    font-size: 12px;
    overflow: auto;
    margin: 5px 0px;
	padding: 0px;
    line-height: 12pt;
}
</style>
<p><h3>
	<span style="font-size:12px;">1)EventListener 添加规则</span>
</h3>
<span style="font-size:12px;">①后门写在main.lua 中 </span><br />
<pre>
    后门在main.lua 中的增加方法:
    Runtime:addEventListener( "appyeastEvent", function(event)
        if event.phase == "backdoor" then
            local input = event.type
            if event.is_error then
               if input == "XXXX" then
                --[[
                  do something
                ]]
               end
            end
        end
    end)
</pre>
<span style="font-size:12px;"> ②增加其他listener 时，需要在createScene 中addEventListener，exitScene 中removeEventListene </span><br /><br />
<pre>
    增加方法:
    在createScene的结尾增加:
    scene:addEventListener("appyeastEvent", scene)
    在exitScene的时候增加:
    scene:removeEventListener("appyeastEvent", scene)
</pre>
<b><span style="font-size:12px;">appyeastEvent说明</span></b><br />
<p>
	<span style="font-size:12px;"> appyeastEvent的各个返回值：</span>
</p>
<p>
	<br />
</p>
<pre >    ---免费获得游戏内物品成功后的事件(一般为hint)
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yad"
    event_params["type"] = "task_done"
    event_params["reward_var"] = reward_var --获得的物品在游戏中的变量
    event_params["reward_count"] = reward_count --获得的数量
<p>    --- banner广告
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yad"
    event_params["type"] = "banner_show"
    event_params["is_visible"] = is_visible --是否显示banner
    event_params["height"] = image_height --banner的高度,如果type 为banner_hide，height为0
<p>    --- xbar广告
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yad"
    event_params["type"] = "xbar"
    event_params["height"] = image_height --xbar整体的高度
    event_params["width"] = image_width --xbar整体的宽度
    event_params["x"] = x --xbar的坐标x(整个xbar)
    event_params["y"] = y --xbar的坐标y(整个xbar)
<p>    --- 后门相关
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "backdoor"
    event_params["type"] = input --后门输入的数据
    event_params["is_error"] = is_error --是否为非内置后门
    --（false为内置后门，不同的项目可以根据项目设置非内置后门，根据is_error和输入的数据）
<p>    --- 购买相关
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yiap"
    event_params["type"] = "purchased"
    event_params["is_succeed"]= is_succeed --是否购买成功
    event_params["iap_key"]=iap_key --购买的物品的iap_key(具体看iap.jsn)
    event_params["error_type"]=M.error_type --如果失败了，苹果那边会返回错误信息，这个也就是那个错误信息
    event_params["state"] = M.transaction_state --交易状态 (包括 purchased restored cancelled failed)
<p>    --- restore相关
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yiap"
    event_params["type"] = "restore"
    event_params["is_succeed"]= is_succeed
    event_params["iap_keys"]=iap_keys --购买的物品的iap_keys(注意，是多个，具体看iap.jsn)
    event_params["error_type"]=M.error_type ----如果失败了，苹果那边会返回错误信息，这个也就是那个错误信息
    event_params["state"] = M.transaction_state --交易状态 (包括 purchased restored cancelled failed)
<p>    --- 游戏金币相关
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "ypoint" --point 是指金币
    event_params["type"] = "spend_point" --spend_point指消耗金币
    event_params["is_succeed"] = M.is_succeed --是否成功
<p>    --- 分享相关
    event_params["name"] = "appyeastEvent"
    event_params["phase"] = "yshare"
    event_params["service_name"] = M.service_name --分享的平台
    event_params["action"] = event.action --动作，包括sent和cancelled
</pre>
<p>
	<br />
</p>
<h3><span style="font-size:12px;">
	2)以set 开头的广告设置不需要做hide操作，在exitScene 的时候会自动关闭，程序增加到return scene之前
</span> </h3>
<span style="font-size:12px;">例如：</span><br />
<span style="font-size:12px;"> appyeast.ad_set_morecorner(scene, true, "game")</span><br />
<span style="font-size:12px;"> appyeast.ad_set_banner(scene, true, "game")</span><br />
<br />
<h3>
	<span style="font-size:12px;">3)在rate  message  screen 广告同时存在的时候，不用调用多个方法，只需要调用<a href="../modules/appyeast.html#show_rate_mssage_screen_ad" target="_blank">appyeast.show_rate_mssage_screen_ad()</a></span>
</h3>
<br />
<h3>
	<span style="font-size:12px;">4)过关广告如果有  “使用hint后显示rate”，则用<a href="../modules/appyeast.html#show_levelend_ad" >appyeast.show_levelend_ad(scene)</a>
	</span>
</h3>
<br />
<h3>
	<span style="font-size:12px;">5)旧产品或者没用mgr_level 的产品，需要使用mgr_levelhelper在关卡开始和过关时调用的方法。</span><a href="../modules/mgr_levelhelper.html" target="_blank"><span style="font-size:12px;">[mgr_levelhelper传送门]</span></a>
</h3>
<p><h3>
	<span style="font-size:12px;">6)使用appyeast.show_rate_after_use() 需要增加的lang有:
        "task_rrw_content": "",
        "task_rrw_content_pl": "",
        "task_rrw_no_button": "",
        "task_rrw_title": "",
        "task_rrw_title_pl": "",
        "task_rrw_yes_button": "",
	</span>
</h3>
<h3>
	<span style="font-size:12px;">在过关界面(其他界面同理)增加rate按钮，要实现的功能如下：
	1、在过关界面增加rate按钮
    2、rate按钮可以在appyeast里设置，
        A 不显示
        B 显示普通rate按钮 （Rate the Awesome Game），点击进入rate
        C 显示激励rate按钮 （Rate and Get X Hints），点击进入rate，rate后奖励hint
        D 显示Get Free Hints按钮 （Get Free Hints），点击后进入积分墙
    3、当设定为显示激励rate按钮的时候，如果用户点过了得到了hint后，还有其他得到free hint的选项，那到下个过关界面，自动显示Get Free Hints按钮。
    4、如果是现实普通rate按钮，用户点击过以后，不再显示这个按钮。
    使用方法：
       1、在CCB中增加一个button，button中放一个label的child，命名为lbl_ratetitle
       2、通关方法appyeast.set_rate_button(btn_obj) 来设置rate按钮，btn_obj是button对象
	</span>
</h3>
<p><h3>
	<span style="font-size:12px;">
	    自定义alert使用方法：
        1、在CCB中创建一个文件，命名为appyeast_alert.ccb
        2、ccb中各元素的命名规则：
            1）标题：lbl_title，字体大小颜色根据项目需求设置
            2）内容：lbl_content,字体大小颜色根据项目需求设置
            3）按钮：按钮图片btn_1(btn_2, btn_3...),按钮文字lbl_1(lbl_1, lbl_2...),按钮文字为按钮图片的子元素，按钮位置根据需要设置
            (请参考Dropbox/AppYeast/Resource2/ColorBlocks/CCB)
        3、使用方法同native.showAlert：
            appyeast.show_alert("Title", "content" , {"Cancel", "OK"}, function(event)
                 if event.action == "clicked" then
                        local i = event.index
                        if i == 1 then
<p>                        elseif i == 2 then
<p>                        end
                 end
            end)
	</span>
</h3>
<p><h3>
	<span style="font-size:12px;">
       自定义金币购买列表
       在CCB中创建三个文件，分别为：
        1）appyeast_point_bg.ccb   金币购买列表的背景，背景中需要放一个layer，定义宽高，设置位置，命名为item_content
        2）appyeast_point_item.ccb  金币购买项的设置，按钮命名为btn_buy，子元素分别为lbl_num(用来显示金币数量)，lbl_price(用来显示价钱)，spr_point1,spr_point2..(金币图标)（注意，root的大小不要设置为100%，要设置为指定宽高）
        3）appyeast_point_free.ccb  如果要显示Free按钮，则需要创建该文件来设置,按钮命名为btn_free
        (请参考Dropbox/AppYeast/Resource2/ColorBlocks/CCB)
<p>	</span>
</h3>
<p><h3>
	<span style="font-size:12px;">
       自定义购买列表
<p>
	</span>
</h3>
<br />

</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
